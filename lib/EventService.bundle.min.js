!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.EventService=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
"use strict";var Registry=_dereq_("./registry/Registry.js"),Event=_dereq_("./Event.js"),checkType=_dereq_("./utils/checkType.js"),eventPrioritySort=function(t,e){return e.getPriority()-t.getPriority()},_on=function(t,e){checkType(t,"object","options",!0),t.context=e;var r=this.register(t);return this.getRegistryChannel(t.channel)[t.name].sort(eventPrioritySort),r},_itemFactory=function(t){var e=new Event({id:this._getNextId(),name:t.name,channel:t.channel,priority:t.priority,data:t.data,callBack:t.callBack,context:t.context});return e._onStop=this.off.bind(this,e),e},_off=function(t){var e=this.remove(t);e.forEach(function(t){t.stop()})},_trigger=function(t){var e=this.filter(t),r=Array.prototype.slice.call(arguments,1);e.sort(eventPrioritySort),e.forEach(function(t){t.trigger.apply(t,r)})},EventService=Registry.prototype["extends"]({on:_on,off:_off,trigger:_trigger,_itemFactory:_itemFactory});module.exports=EventService;
},{"./Event.js":2,"./registry/Registry.js":3,"./utils/checkType.js":5}],2:[function(_dereq_,module,exports){
"use strict";var RegistryItem=_dereq_("./registry/RegistryItem.js"),checkType=_dereq_("./utils/checkType.js"),_checkIfStopped=function(){if(this.isStopped())throw new Error("Stopped event")},_init=function(t){var e=checkType(t.priority,"number","priority")||1,i=!1;checkType(t.name,"string","name",!0),checkType(t.channel,"string","channel"),Object.defineProperties(this,{priority:{get:function(){return e},set:function(t){e=checkType(t,"number","priority")}},callBack:{value:checkType(t.callBack,"function","callBack",!0)},context:{value:t.context},data:{value:t.data},paused:{get:function(){return i},set:function(t){i=checkType(t,"boolean","paused",!0)}}})},_getId=function(){return this.id},_getChannel=function(){return this.channel},_getCallback=function(){return this.callBack},_getContext=function(){return this.context},_getData=function(){return this.data},_getName=function(){return this.name},_getPriority=function(){return this.priority},_incrementPriority=function(t){_checkIfStopped.call(this),this.priority+=checkType(t,"number","step")||1},_decrementPriority=function(t){_checkIfStopped.call(this),this.priority-=checkType(t,"number","step")||1},_trigger=function(){_checkIfStopped.call(this),this.isPaused()||this.callBack.apply(this.context,arguments)},_isPaused=function(){return this.paused===!0},_pause=function(){_checkIfStopped.call(this),this.paused=!0},_resume=function(){_checkIfStopped.call(this),this.paused=!1},_stop=function(){Object.defineProperty(this,"stopped",{value:!0}),void 0!==this._onStop&&this._onStop()},_isStopped=function(){return this.stopped===!0},Event=RegistryItem.prototype["extends"]({init:_init,getId:_getId,getCallback:_getCallback,getChannel:_getChannel,getContext:_getContext,getData:_getData,getName:_getName,getPriority:_getPriority,incrementPriority:_incrementPriority,decrementPriority:_decrementPriority,trigger:_trigger,isPaused:_isPaused,pause:_pause,resume:_resume,stop:_stop,isStopped:_isStopped});module.exports=Event;
},{"./registry/RegistryItem.js":4,"./utils/checkType.js":5}],3:[function(_dereq_,module,exports){
"use strict";var RegistryItem=_dereq_("./RegistryItem.js"),checkType=_dereq_("../utils/checkType.js"),extendsFactory=_dereq_("../utils/extendsFactory.js"),globalItemIdTracker=0,_findItems=function(e,t){var r=void 0!==e.getId?e.getId():e.id,n=void 0!==e.getName?e.getName():e.name,i=void 0!==e.getChannel?e.getChannel():e.channel,s=this.getRegistryChannel(i),a=function(e){return void 0!==e&&e.length>0};if(0===Object.keys(s).length)return[];if(void 0!==r){var o=s[n];if(!a(o))return[];for(var g=0;g<o.length;g++){var y=void 0!==o[g].getId?o[g].getId():o[g].id;if(y===r){var c=o[g];return t===!0&&o.splice(g,1),[c]}}return[]}var l=function(r){var n=[];if(a(r))for(var i=r.length-1;i>=0;i--){var s=r[i];(void 0!==e.selector?e.selector.call(s,s):!0)&&(n.push(s),t===!0&&r.splice(i,1))}return n};if(void 0!==n)return l(s[n]);var h=[];return Object.keys(s).forEach(function(e){h=h.concat(l(s[e]))}),h},Registry=function(){this._channelRegistry={defaultChannel:{}},this.init.apply(this,arguments)},_init=function(){},_register=function(e){var t=checkType(e.name,"string","name",!0),r=checkType(e.channel,"string","channel"),n=this.getRegistryChannel(r),i=this._itemFactory(e);return void 0===n[t]&&(n[t]=[]),n[t].push(i),i},_itemFactory=function(e){return new RegistryItem({id:this._getNextId(),name:e.name,channel:e.channel})},_getNextId=function(){return globalItemIdTracker++},_remove=function(e){return _findItems.call(this,e,!0)},_filter=function(e){return _findItems.call(this,e)},_getRegistryChannel=function(e){return void 0===e?this._channelRegistry.defaultChannel:(void 0===this._channelRegistry[e]&&(this._channelRegistry[e]={}),this._channelRegistry[e])},_emptyRegistryChannel=function(e){this._channelRegistry[void 0!==e?e:"defaultChannel"]={}};Registry.prototype["extends"]=extendsFactory(Registry),Registry.prototype.init=_init,Registry.prototype._itemFactory=_itemFactory,Registry.prototype._getNextId=_getNextId,Registry.prototype.filter=_filter,Registry.prototype.register=_register,Registry.prototype.remove=_remove,Registry.prototype.emptyRegistryChannel=_emptyRegistryChannel,Registry.prototype.getRegistryChannel=_getRegistryChannel,module.exports=Registry;
},{"../utils/checkType.js":5,"../utils/extendsFactory.js":6,"./RegistryItem.js":4}],4:[function(_dereq_,module,exports){
"use strict";var extendsFactory=_dereq_("../utils/extendsFactory.js"),RegistryItem=function(e){if(!e)throw new TypeError("RegistryItem arguments should be defined");if(void 0===e.id)throw new TypeError("RegistryItem (id) should be defined");if(void 0===e.name)throw new TypeError("RegistryItem (name) should be defined");Object.defineProperties(this,{id:{value:e.id},channel:{value:e.channel},name:{value:e.name}}),this.init.apply(this,arguments)},_init=function(){};RegistryItem.prototype["extends"]=extendsFactory(RegistryItem),RegistryItem.prototype.init=_init,module.exports=RegistryItem;
},{"../utils/extendsFactory.js":6}],5:[function(_dereq_,module,exports){
"use strict";var _checkType=function(e,r,o,t){if(void 0===e&&t!==!0)return e;if(typeof e!==r)throw new TypeError("Invalid type"+(void 0!==o?" for "+o:""));return e};module.exports=_checkType;
},{}],6:[function(_dereq_,module,exports){
"use strict";var _extendsFactory=function(t,e){var o=e||"extends";return function(e){e=e||{};var r=function(){t.apply(this,arguments)};return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype[o]=_extendsFactory(r),Object.keys(e).forEach(function(t){r.prototype[t]=e[t]}),r}};module.exports=_extendsFactory;
},{}]},{},[1])(1)
});